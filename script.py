# VytvoÅ™enÃ­ kompletnÃ­ho file tree pro USB HID implementaci v mcp-prompts-rs

file_structure = {
    "Cargo.toml": {
        "description": "Dual-binary configuration s ESP32 zÃ¡vislostmi",
        "priority": "ðŸ”´ KritickÃ©",
        "size": "~150 Å™Ã¡dkÅ¯",
        "features": ["std", "embedded", "hid", "composite-device"]
    },
    ".cargo/config.toml": {
        "description": "ESP32-S3 target configuration a runner setup",
        "priority": "ðŸ”´ KritickÃ©", 
        "size": "~50 Å™Ã¡dkÅ¯",
        "content": "xtensa-esp32s3-none-elf target, espflash runner, WiFi env vars"
    },
    "src/embedded/main.rs": {
        "description": "ESP32 entry point s #![no_std] a async main",
        "priority": "ðŸ”´ KritickÃ©",
        "size": "~200 Å™Ã¡dkÅ¯", 
        "content": "WiFi init, USB composite device, MCP server startup"
    },
    "src/hid/mod.rs": {
        "description": "USB HID module API",
        "priority": "ðŸ”´ KritickÃ©",
        "size": "~100 Å™Ã¡dkÅ¯",
        "exports": ["HidKeyboard", "CompositeDevice", "HidError"]
    },
    "src/hid/keyboard.rs": {
        "description": "HID keyboard implementation s boot protocol",
        "priority": "ðŸ”´ KritickÃ©", 
        "size": "~300 Å™Ã¡dkÅ¯",
        "features": ["send_string()", "send_key_report()", "boot protocol"]
    },
    "src/hid/layout.rs": {
        "description": "MapovÃ¡nÃ­ ASCII â†’ USB HID keycodes",
        "priority": "ðŸŸ¡ StÅ™ednÃ­",
        "size": "~150 Å™Ã¡dkÅ¯",
        "content": "US keyboard layout, modifikÃ¡tory, speciÃ¡lnÃ­ klÃ¡vesy"
    },
    "src/hid/composite.rs": {
        "description": "Composite USB device (HID + RNDIS + CDC)",
        "priority": "ðŸ”´ KritickÃ©",
        "size": "~250 Å™Ã¡dkÅ¯", 
        "interfaces": ["HID keyboard", "RNDIS network", "CDC serial"]
    },
    "src/hid/descriptors.rs": {
        "description": "USB deskriptory pro HID a composite device",
        "priority": "ðŸŸ¡ StÅ™ednÃ­",
        "size": "~200 Å™Ã¡dkÅ¯",
        "content": "Boot keyboard descriptor, device descriptor, string descriptors"
    },
    "src/api/websocket.rs": {
        "description": "UnifikovanÃ½ WebSocket server (desktop + embedded)",
        "priority": "ðŸ”´ KritickÃ©",
        "size": "~400 Å™Ã¡dkÅ¯",
        "features": ["Feature-gated tokio/embassy", "JSON-RPC 2.0", "MCP protocol"]
    },
    "src/api/mcp.rs": {
        "description": "Model Context Protocol implementace",
        "priority": "ðŸŸ¡ StÅ™ednÃ­", 
        "size": "~300 Å™Ã¡dkÅ¯",
        "content": "Prompt templates, variable substitution, HID output mode"
    },
    "src/storage/littlefs.rs": {
        "description": "LittleFS storage pro ESP32 (feature-gated)",
        "priority": "ðŸŸ¡ StÅ™ednÃ­",
        "size": "~200 Å™Ã¡dkÅ¯",
        "features": ["VFS bindings", "embedded prompts fallback"]
    },
    "src/embedded/prompts.rs": {
        "description": "Generated file s embedded prompt katalogem",
        "priority": "ðŸŸ¢ RychlÃ©",
        "size": "~500 Å™Ã¡dkÅ¯", 
        "content": "Static EMBEDDED_PROMPTS array, generated by export_catalog.ts"
    },
    "src/embedded/network.rs": {
        "description": "WiFi a USB RNDIS network setup",
        "priority": "ðŸŸ¡ StÅ™ednÃ­",
        "size": "~150 Å™Ã¡dkÅ¯",
        "features": ["WiFi client/AP mode", "RNDIS interface"]
    },
    "scripts/build_esp32.sh": {
        "description": "Complete ESP32 build pipeline",
        "priority": "ðŸ”´ KritickÃ©",
        "size": "~100 Å™Ã¡dkÅ¯",
        "steps": ["toolchain check", "catalog export", "cross-compile", "size validation"]
    },
    "scripts/flash_esp32.sh": {
        "description": "ESP32 deployment automation",
        "priority": "ðŸ”´ KritickÃ©", 
        "size": "~80 Å™Ã¡dkÅ¯",
        "features": ["port detection", "erase flash", "firmware upload", "monitor"]
    },
    "scripts/export_catalog.ts": {
        "description": "Convert JSON prompts â†’ Rust const arrays",
        "priority": "ðŸ”´ KritickÃ©",
        "size": "~200 Å™Ã¡dkÅ¯",
        "output": "src/embedded/prompts.rs with static arrays"
    },
    "tests/integration_hid.rs": {
        "description": "HID functionality integration tests",
        "priority": "ðŸŸ¡ StÅ™ednÃ­",
        "size": "~150 Å™Ã¡dkÅ¯", 
        "tests": ["boot protocol", "composite enumeration", "string sending"]
    },
    "examples/hid_demo.rs": {
        "description": "Standalone HID keyboard example",
        "priority": "ðŸŸ¢ RychlÃ©",
        "size": "~100 Å™Ã¡dkÅ¯",
        "content": "Basic keyboard demo for testing"
    },
    ".github/workflows/esp-build.yml": {
        "description": "CI/CD pro ESP32 cross-compilation",
        "priority": "ðŸŸ¡ StÅ™ednÃ­",
        "size": "~80 Å™Ã¡dkÅ¯",
        "features": ["Ubuntu runner", "espup install", "artifact upload"]
    },
    "README.md": {
        "description": "Updated documentation s HID usage",
        "priority": "ðŸŸ¢ RychlÃ©", 
        "size": "~300 Å™Ã¡dkÅ¯",
        "sections": ["Quick start", "USB HID mode", "Android support"]
    },
    "build.rs": {
        "description": "Build script s feature gates",
        "priority": "ðŸŸ¡ StÅ™ednÃ­",
        "size": "~50 Å™Ã¡dkÅ¯",
        "features": ["conditional compilation", "embedded resource bundling"]
    }
}

# VypoÄÃ­tÃ¡nÃ­ statistik
total_files = len(file_structure)
critical_files = sum(1 for f in file_structure.values() if f["priority"] == "ðŸ”´ KritickÃ©")
medium_files = sum(1 for f in file_structure.values() if f["priority"] == "ðŸŸ¡ StÅ™ednÃ­") 
quick_files = sum(1 for f in file_structure.values() if f["priority"] == "ðŸŸ¢ RychlÃ©")

print("ðŸ“ KompletnÃ­ file structure pro USB HID implementaci v mcp-prompts-rs")
print("=" * 80)
print(f"Celkem souborÅ¯: {total_files}")
print(f"ðŸ”´ KritickÃ© (>3 dny): {critical_files}")
print(f"ðŸŸ¡ StÅ™ednÃ­ (1-3 dny): {medium_files}") 
print(f"ðŸŸ¢ RychlÃ© (â‰¤1 den): {quick_files}")
print()

# DetailnÃ­ breakdown podle kategoriÃ­
categories = {
    "Core ESP32 Implementation": [
        "Cargo.toml", ".cargo/config.toml", "src/embedded/main.rs", 
        "src/embedded/prompts.rs", "src/embedded/network.rs"
    ],
    "USB HID Stack": [
        "src/hid/mod.rs", "src/hid/keyboard.rs", "src/hid/layout.rs",
        "src/hid/composite.rs", "src/hid/descriptors.rs"
    ],
    "MCP Integration": [
        "src/api/websocket.rs", "src/api/mcp.rs", "src/storage/littlefs.rs"
    ],
    "Build & Deploy": [
        "scripts/build_esp32.sh", "scripts/flash_esp32.sh", 
        "scripts/export_catalog.ts", "build.rs"
    ],
    "Testing & Documentation": [
        "tests/integration_hid.rs", "examples/hid_demo.rs",
        ".github/workflows/esp-build.yml", "README.md"
    ]
}

for category, files in categories.items():
    print(f"\nðŸ“‚ {category}")
    print("-" * 60)
    for file in files:
        if file in file_structure:
            info = file_structure[file]
            print(f"{info['priority']} {file:<35} | {info['description']}")

print("\n" + "="*80)
print("ðŸŽ¯ ImplementaÄnÃ­ priority:")
print("1. NejdÅ™Ã­ve kritickÃ© soubory (ÄervenÃ©) - zÃ¡klad funkÄnosti")
print("2. Potom stÅ™ednÃ­ (Å¾lutÃ©) - rozÅ¡Ã­Å™enÃ© features") 
print("3. Nakonec rychlÃ© (zelenÃ©) - dokumentace a pÅ™Ã­klady")
print()
print("â±ï¸ OdhadovanÃ½ Äas celkovÃ© implementace: 3-4 tÃ½dny")
print("ðŸ’¾ OdhadovanÃ¡ velikost finÃ¡lnÃ­ho firmware: < 3MB pro 8MB flash")